# data_acquisition > data_pull.r

From **yahoo finance** (library - quantmod) We pulled daily closing prices (X_price) of futures contracts traded for Shell (LSE: SHEL) and British Petroleum, BP (LSE: BP) going as far back as 2000. 

- **N/A Handling**: Fill missing values with the mean of the previous 7 days

- **Data Parity**:  Transformed daily _closing prices_ to logarithmic scale, to compare "apples to apples"

- Daily returns 

        Correlation of returns: +70 %

Plot the indexes 


# data_analysis > tsa_checks.r

## Stationarity check:
Augmented Dickey–Fuller (ADF) to logarithmnic prices and returns.

For both gasoline and heating oil log-prices, the ADF p-values is bigger than the conf interval (0.05), so we cannot reject the null hypotshesis (ie, the series is a random walk, what we want in a financial series)

For log-returns, ADF p-values are below 0.05, indicating stationarity (I(0)).

So, non-stational prices and stational returns require then a cointegration testing.

## Cointegration 

Pairst trading is all about  **assuming our variables move together over time**. To check this, we perform an Engle-Granger, that is both easy and powerful for pairs of vairables. If they indeed move together, the spread (residuals of the model) should move around a long-term average.

If gasoline's and heating oil's closing prices move together over time , we should find the following from the model:

- **α (intercept)** → the base difference between the stocks

- **β (slope)** : equilibrium hedge ratio: **How much does HO move when RBOB moves**

- **R² (fit quality)** – not used for cointegration

- **Residuals** → the spread (actual price - predicted price)

We find evidence of cointegration between RBOB and HO: the ADF test on the residuals returns p ≈ 0.001, which we will consider significant for this analysis. We proceed with our trading implementation.”

⭐ 2. AR(1) Model on the Spread
phi (ar1) = 0.9851


This means:

The spread is mean-reverting, because |phi| < 1

But it is not extremely fast (phi close to 1 → slower reversion)

Still: phi = 0.985 is good in commodity pairs — they tend to revert slower than equity pairs.

⭐ 3. Half-Life of Mean Reversion
half-life = 46.1 days


This tells you:

If the spread widens today, it takes ~46 trading days

to move halfway back to its long-run mean.

Interpretation:

Not super fast (stocks often have 5–10 day half-lives)

But not too slow either

Commodity futures often revert slower due to macro supply/demand cycles